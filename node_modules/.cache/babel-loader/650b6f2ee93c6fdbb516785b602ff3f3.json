{"remainingRequest":"/Users/frank/Desktop/travel/node_modules/babel-loader/lib/index.js!/Users/frank/Desktop/travel/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/frank/Desktop/travel/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/frank/Desktop/travel/src/pages/city/components/Search.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/frank/Desktop/travel/src/pages/city/components/Search.vue","mtime":1590135799227},{"path":"/Users/frank/Desktop/travel/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/frank/Desktop/travel/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/frank/Desktop/travel/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/frank/Desktop/travel/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmRleC1vZiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zZWFyY2giOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEJTY3JvbGwgZnJvbSAnYmV0dGVyLXNjcm9sbCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ2l0eVNlYXJjaCcsCiAgcHJvcHM6IHsKICAgIGNpdGllczogT2JqZWN0CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAga2V5d29yZDogJycsCiAgICAgIGxpc3Q6IFtdLAogICAgICB0aW1tZXI6IG51bGwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVDaXR5Q2xpY2s6IGZ1bmN0aW9uIGhhbmRsZUNpdHlDbGljayhjaXR5KSB7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY2hhbmdlQ2l0eScsIGNpdHkpOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnLycpOwogICAgICB0aGlzLmtleXdvcmQgPSAnJzsKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBoYXNOb0RhdGE6IGZ1bmN0aW9uIGhhc05vRGF0YSgpIHsKICAgICAgcmV0dXJuICF0aGlzLmxpc3QubGVuZ3RoOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGtleXdvcmQ6IGZ1bmN0aW9uIGtleXdvcmQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBpZiAodGhpcy50aW1tZXIpIHsKICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1tZXIpOwogICAgICB9CgogICAgICB0aGlzLnRpbW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgIHZhciByZXN1bHQgPSBbXTsKCiAgICAgICAgaWYgKCFfdGhpcy5rZXl3b3JkKSB7CiAgICAgICAgICBfdGhpcy5saXN0ID0gW107CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBmb3IgKHZhciBpIGluIF90aGlzLmNpdGllcykgewogICAgICAgICAgX3RoaXMuY2l0aWVzW2ldLmZvckVhY2goZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICAgIGlmICh2YWx1ZS5zcGVsbC5pbmRleE9mKF90aGlzLmtleXdvcmQpID4gLTEgfHwgdmFsdWUubmFtZS5pbmRleE9mKF90aGlzLmtleXdvcmQpID4gLTEpIHsKICAgICAgICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgX3RoaXMubGlzdCA9IHJlc3VsdDsKICAgICAgfSwgMTAwKTsKICAgIH0KICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLnNjcm9sbCA9IG5ldyBCU2Nyb2xsKHRoaXMuJHJlZnMuc2VhcmNoLCB7CiAgICAgIGNsaWNrOiB0cnVlCiAgICB9KTsKICB9Cn07"},{"version":3,"sources":["Search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAiBA,OAAA,OAAA,MAAA,eAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,MAAA,EAAA;AADA,GAFA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA,EAFA;AAGA,MAAA,MAAA,EAAA;AAHA,KAAA;AAKA,GAXA;AAYA,EAAA,OAAA,EAAA;AACA,IAAA,eADA,2BACA,IADA,EACA;AACA,WAAA,MAAA,CAAA,MAAA,CAAA,YAAA,EAAA,IAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,GAAA;AACA,WAAA,OAAA,GAAA,EAAA;AACA;AALA,GAZA;AAmBA,EAAA,QAAA,EAAA;AACA,IAAA,SADA,uBACA;AACA,aAAA,CAAA,KAAA,IAAA,CAAA,MAAA;AACA;AAHA,GAnBA;AAwBA,EAAA,KAAA,EAAA;AACA,IAAA,OADA,qBACA;AAAA;;AACA,UAAA,KAAA,MAAA,EAAA;AACA,QAAA,YAAA,CAAA,KAAA,MAAA,CAAA;AACA;;AACA,WAAA,MAAA,GAAA,UAAA,CAAA,YAAA;AACA,YAAA,MAAA,GAAA,EAAA;;AACA,YAAA,CAAA,KAAA,CAAA,OAAA,EAAA;AACA,UAAA,KAAA,CAAA,IAAA,GAAA,EAAA;AACA;AACA;;AACA,aAAA,IAAA,CAAA,IAAA,KAAA,CAAA,MAAA,EAAA;AACA,UAAA,KAAA,CAAA,MAAA,CAAA,CAAA,EAAA,OAAA,CAAA,UAAA,KAAA,EAAA;AACA,gBAAA,KAAA,CAAA,KAAA,CAAA,OAAA,CAAA,KAAA,CAAA,OAAA,IAAA,CAAA,CAAA,IACA,KAAA,CAAA,IAAA,CAAA,OAAA,CAAA,KAAA,CAAA,OAAA,IAAA,CAAA,CADA,EACA;AACA,cAAA,MAAA,CAAA,IAAA,CAAA,KAAA;AACA;AACA,WALA;AAMA;;AACA,QAAA,KAAA,CAAA,IAAA,GAAA,MAAA;AACA,OAfA,EAeA,GAfA,CAAA;AAgBA;AArBA,GAxBA;AA+CA,EAAA,OA/CA,qBA+CA;AACA,SAAA,MAAA,GAAA,IAAA,OAAA,CAAA,KAAA,KAAA,CAAA,MAAA,EAAA;AAAA,MAAA,KAAA,EAAA;AAAA,KAAA,CAAA;AACA;AAjDA,CAAA","sourcesContent":["<template>\n  <div>\n    <div class=\"wrapper\">\n      <input class=\"input\" placeholder=\"输入城市名或拼音\" v-model=\"keyword\"/>\n    </div>\n    <div class=\"search-content\" ref=\"search\" v-show=\"keyword\">\n        <ul>\n          <li class=\"list border-bottom\" v-for=\"item of list\" :key=\"item.id\"\n          @click=\"handleCityClick(item.name)\"\n          >{{item.name}}</li>\n          <li class=\"list border-bottom\" v-show=\"hasNoData\">没有找到匹配数据</li>\n        </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nimport BScroll from 'better-scroll'\nexport default {\n  name: 'CitySearch',\n  props: {\n    cities: Object\n  },\n  data () {\n    return {\n      keyword: '',\n      list: [],\n      timmer: null\n    }\n  },\n  methods: {\n    handleCityClick (city) {\n      this.$store.commit('changeCity', city)\n      this.$router.push('/')\n      this.keyword = ''\n    }\n  },\n  computed: {\n    hasNoData () {\n      return !this.list.length\n    }\n  },\n  watch: {\n    keyword () {\n      if (this.timmer) {\n        clearTimeout(this.timmer)\n      }\n      this.timmer = setTimeout(() => {\n        const result = []\n        if (!this.keyword) {\n          this.list = []\n          return\n        }\n        for (let i in this.cities) {\n          this.cities[i].forEach((value) => {\n            if (value.spell.indexOf(this.keyword) > -1 ||\n            value.name.indexOf(this.keyword) > -1) {\n              result.push(value)\n            }\n          })\n        }\n        this.list = result\n      }, 100)\n    }\n  },\n  mounted () {\n    this.scroll = new BScroll(this.$refs.search, {click: true})\n  }\n}\n</script>\n\n<style scoped>\n.wrapper {\n  height: 0.58rem;\n  background: #00bcd4;\n  line-height: 0.58rem;\n  text-align: center;\n}\n.input {\n  width: 95%;\n  border-radius: 0.05rem;\n  text-align: center;\n  font-size: 0.26rem;\n  color: #ccc;\n  box-sizing: border-box;\n  padding: 0 0.1rem;\n}\n.search-content{\n  z-index: 1;\n  position: absolute;\n  top: 1.26rem;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: #ccc;\n}\n.list{\n  background: #fff;\n  color: #666;\n  line-height: .48rem;\n  padding-left: .2rem;\n}\n</style>\n"],"sourceRoot":"src/pages/city/components"}]}