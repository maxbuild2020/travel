{"remainingRequest":"/Users/frank/Documents/GitHub/travel-vue3/node_modules/babel-loader/lib/index.js!/Users/frank/Documents/GitHub/travel-vue3/node_modules/vue-cli-plugin-vue-next/node_modules/vue-loader/dist/templateLoader.js??ref--6!/Users/frank/Documents/GitHub/travel-vue3/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/frank/Documents/GitHub/travel-vue3/node_modules/vue-cli-plugin-vue-next/node_modules/vue-loader/dist/index.js??ref--0-1!/Users/frank/Documents/GitHub/travel-vue3/src/pages/city/components/Search.vue?vue&type=template&id=42ab7441&scoped=true","dependencies":[{"path":"/Users/frank/Documents/GitHub/travel-vue3/src/pages/city/components/Search.vue","mtime":1594473395061},{"path":"/Users/frank/Documents/GitHub/travel-vue3/node_modules/cache-loader/dist/cjs.js","mtime":1594473392680},{"path":"/Users/frank/Documents/GitHub/travel-vue3/node_modules/babel-loader/lib/index.js","mtime":1594473392373},{"path":"/Users/frank/Documents/GitHub/travel-vue3/node_modules/vue-cli-plugin-vue-next/node_modules/vue-loader/dist/templateLoader.js","mtime":1594473394877},{"path":"/Users/frank/Documents/GitHub/travel-vue3/node_modules/cache-loader/dist/cjs.js","mtime":1594473392680},{"path":"/Users/frank/Documents/GitHub/travel-vue3/node_modules/vue-cli-plugin-vue-next/node_modules/vue-loader/dist/index.js","mtime":1594473394874}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCB7IHZNb2RlbFRleHQgYXMgX3ZNb2RlbFRleHQsIGNyZWF0ZVZOb2RlIGFzIF9jcmVhdGVWTm9kZSwgd2l0aERpcmVjdGl2ZXMgYXMgX3dpdGhEaXJlY3RpdmVzLCByZW5kZXJMaXN0IGFzIF9yZW5kZXJMaXN0LCBGcmFnbWVudCBhcyBfRnJhZ21lbnQsIG9wZW5CbG9jayBhcyBfb3BlbkJsb2NrLCBjcmVhdGVCbG9jayBhcyBfY3JlYXRlQmxvY2ssIHRvRGlzcGxheVN0cmluZyBhcyBfdG9EaXNwbGF5U3RyaW5nLCB2U2hvdyBhcyBfdlNob3csIHdpdGhTY29wZUlkIGFzIF93aXRoU2NvcGVJZCwgcHVzaFNjb3BlSWQgYXMgX3B1c2hTY29wZUlkLCBwb3BTY29wZUlkIGFzIF9wb3BTY29wZUlkIH0gZnJvbSAidnVlIjsKCnZhciBfd2l0aElkID0gLyojX19QVVJFX18qL193aXRoU2NvcGVJZCgiZGF0YS12LTQyYWI3NDQxIik7CgpfcHVzaFNjb3BlSWQoImRhdGEtdi00MmFiNzQ0MSIpOwoKdmFyIF9ob2lzdGVkXzEgPSB7CiAgImNsYXNzIjogIndyYXBwZXIiCn07CnZhciBfaG9pc3RlZF8yID0gewogICJjbGFzcyI6ICJzZWFyY2gtY29udGVudCIsCiAgcmVmOiAic2VhcmNoIgp9Owp2YXIgX2hvaXN0ZWRfMyA9IHsKICAiY2xhc3MiOiAibGlzdCBib3JkZXItYm90dG9tIgp9OwoKX3BvcFNjb3BlSWQoKTsKCmV4cG9ydCB2YXIgcmVuZGVyID0gLyojX19QVVJFX18qL193aXRoSWQoZnVuY3Rpb24gcmVuZGVyKF9jdHgsIF9jYWNoZSkgewogIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jaygiZGl2IiwgbnVsbCwgW19jcmVhdGVWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMSwgW193aXRoRGlyZWN0aXZlcyhfY3JlYXRlVk5vZGUoImlucHV0IiwgewogICAgImNsYXNzIjogImlucHV0IiwKICAgIHBsYWNlaG9sZGVyOiAi6L6T5YWl5Z+O5biC5ZCN5oiW5ou86Z+zIiwKICAgICJvblVwZGF0ZTptb2RlbFZhbHVlIjogX2NhY2hlWzFdIHx8IChfY2FjaGVbMV0gPSBmdW5jdGlvbiAoJGV2ZW50KSB7CiAgICAgIHJldHVybiBfY3R4LmtleXdvcmQgPSAkZXZlbnQ7CiAgICB9KQogIH0sIG51bGwsIDUxMgogIC8qIE5FRURfUEFUQ0ggKi8KICApLCBbW192TW9kZWxUZXh0LCBfY3R4LmtleXdvcmRdXSldKSwgX3dpdGhEaXJlY3RpdmVzKF9jcmVhdGVWTm9kZSgiZGl2IiwgX2hvaXN0ZWRfMiwgW19jcmVhdGVWTm9kZSgidWwiLCBudWxsLCBbKF9vcGVuQmxvY2sodHJ1ZSksIF9jcmVhdGVCbG9jayhfRnJhZ21lbnQsIG51bGwsIF9yZW5kZXJMaXN0KF9jdHgubGlzdCwgZnVuY3Rpb24gKGl0ZW0pIHsKICAgIHJldHVybiBfb3BlbkJsb2NrKCksIF9jcmVhdGVCbG9jaygibGkiLCB7CiAgICAgICJjbGFzcyI6ICJsaXN0IGJvcmRlci1ib3R0b20iLAogICAgICBrZXk6IGl0ZW0uaWQsCiAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soJGV2ZW50KSB7CiAgICAgICAgcmV0dXJuIF9jdHguaGFuZGxlQ2l0eUNsaWNrKGl0ZW0ubmFtZSk7CiAgICAgIH0KICAgIH0sIF90b0Rpc3BsYXlTdHJpbmcoaXRlbS5uYW1lKSwgOQogICAgLyogVEVYVCwgUFJPUFMgKi8KICAgICwgWyJvbkNsaWNrIl0pOwogIH0pLCAxMjgKICAvKiBLRVlFRF9GUkFHTUVOVCAqLwogICkpLCBfd2l0aERpcmVjdGl2ZXMoX2NyZWF0ZVZOb2RlKCJsaSIsIF9ob2lzdGVkXzMsICLmsqHmnInmib7liLDljLnphY3mlbDmja4iLCA1MTIKICAvKiBORUVEX1BBVENIICovCiAgKSwgW1tfdlNob3csIF9jdHguaGFzTm9EYXRhXV0pXSldLCA1MTIKICAvKiBORUVEX1BBVENIICovCiAgKSwgW1tfdlNob3csIF9jdHgua2V5d29yZF1dKV0pOwp9KTs="},{"version":3,"sources":["/Users/frank/Documents/GitHub/travel-vue3/src/pages/city/components/Search.vue"],"names":[],"mappings":";;;;;;;;AAES,WAAM;;;AAGN,WAAM,gB;AAAiB,EAAA,GAAG,EAAC;;;AAKtB,WAAM;;;;;;uBATlB,YAAA,CAYM,KAZN,EAYM,IAZN,EAYM,CAXJ,YAAA,CAEM,KAFN,EAAA,UAAA,EAEM,C,gBADJ,YAAA,CAA+D,OAA/D,EAA+D;AAAxD,aAAM,OAAkD;AAA1C,IAAA,WAAW,EAAC,UAA8B;;aAAV,IAAA,CAAA,OAAA,GAAO,M;;AAAG,GAA/D,E,IAAA,E;;AAAA,G,iBAAqD,IAAA,CAAA,O,GACjD,CAFN,CAWI,E,gBARJ,YAAA,CAOM,KAPN,EAAA,UAAA,EAOM,CANF,YAAA,CAKK,IALL,EAKK,IALL,EAKK,E,kBAJH,YAAA,CAEmB,SAFnB,EAEmB,IAFnB,EAEmB,WAAA,CAF2B,IAAA,CAAA,IAE3B,EAF+B,UAAZ,IAAY,EAAR;yBAA1C,YAAA,CAEmB,IAFnB,EAEmB;AAFf,eAAM,oBAES;AAFkC,MAAA,GAAG,EAAE,IAAI,CAAC,EAE5C;AADlB,MAAA,OAAK,EAAA,iBAAA,MAAA;AAAA,eAAE,IAAA,CAAA,eAAA,CAAgB,IAAI,CAAC,IAArB,CAAF;AAAA;AACa,KAFnB,E,iBAEG,IAAI,CAAC,I,CAFR,EAEY;AAAA;AAFZ,MAEY,CAAA,SAAA,CAFZ,C;GAEmB,CAFnB,E;;AAAA,GAIG,G,gBADH,YAAA,CAA+D,IAA/D,EAAA,UAAA,EAAkD,UAAlD,EAA0D;AAAA;AAA1D,G,EAA0D,C,SAAnB,IAAA,CAAA,S,CAAmB,C,CACvD,CALL,CAME,CAPN,E;;AAAA,G,YAAiD,IAAA,CAAA,O,GAQ7C,CAZN,C","sourcesContent":["<template>\n  <div>\n    <div class=\"wrapper\">\n      <input class=\"input\" placeholder=\"输入城市名或拼音\" v-model=\"keyword\"/>\n    </div>\n    <div class=\"search-content\" ref=\"search\" v-show=\"keyword\">\n        <ul>\n          <li class=\"list border-bottom\" v-for=\"item of list\" :key=\"item.id\"\n          @click=\"handleCityClick(item.name)\"\n          >{{item.name}}</li>\n          <li class=\"list border-bottom\" v-show=\"hasNoData\">没有找到匹配数据</li>\n        </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {useStore} from 'vuex'\nimport {useRouter} from 'vue-router'\nimport {computed, watch, onMounted, ref} from 'vue'\nimport BScroll from 'better-scroll'\nexport default {\n  name: 'CitySearch',\n  props: {\n    cities: Object\n  },\n  setup(props) {\n    const keyword = ref('')\n    const list = ref([])\n    const search = ref(null)\n    let timer = null\n    const store = useStore()\n    const router = useRouter()\n    const hasNoData = computed(() => {\n      return !list.value.length})\n\n    function handleCityClick (city) {\n      store.commit('changeCity', city)\n      router.push('/')\n    }\n\n    watch(keyword, (keyword,prevKeyword) => {\n      if (timer) {\n        clearTimeout(timer)\n        timer = null\n      }\n      if (!keyword) {\n          list.value = []       \n          return\n        }\n      timer = setTimeout(() => {\n        const result = []\n        for (let i in props.cities) {\n          props.cities[i].forEach((value) => {\n            if (value.spell.indexOf(keyword.toLowerCase()) > -1 ||\n            value.name.indexOf(keyword) > -1) {\n              result.push(value)\n              \n            }\n          })\n        }\n        list.value = result\n        // console.log(!list.value.length)\n      }, 100)\n    })\n\n  onMounted(() =>{\n    new BScroll(search.value, {click: true})\n  })\n  return {keyword, list, hasNoData, handleCityClick, search}\n  }\n}\n</script>\n\n<style scoped>\n.wrapper {\n  height: 0.58rem;\n  background: #00bcd4;\n  line-height: 0.58rem;\n  text-align: center;\n}\n.input {\n  width: 95%;\n  border-radius: 0.05rem;\n  text-align: center;\n  font-size: 0.26rem;\n  color: #ccc;\n  box-sizing: border-box;\n  padding: 0 0.1rem;\n}\n.search-content{\n  z-index: 1;\n  position: absolute;\n  top: 1.26rem;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: #ccc;\n}\n.list{\n  background: #fff;\n  color: #666;\n  line-height: .48rem;\n  padding-left: .2rem;\n}\n</style>\n"],"sourceRoot":""}]}