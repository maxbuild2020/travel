{"remainingRequest":"/Users/frank/Desktop/travel/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/frank/Desktop/travel/src/pages/city/components/Search.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/frank/Desktop/travel/src/pages/city/components/Search.vue","mtime":1590135799227},{"path":"/Users/frank/Desktop/travel/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/frank/Desktop/travel/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/frank/Desktop/travel/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/frank/Desktop/travel/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBCU2Nyb2xsIGZyb20gJ2JldHRlci1zY3JvbGwnCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQ2l0eVNlYXJjaCcsCiAgcHJvcHM6IHsKICAgIGNpdGllczogT2JqZWN0CiAgfSwKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIGtleXdvcmQ6ICcnLAogICAgICBsaXN0OiBbXSwKICAgICAgdGltbWVyOiBudWxsCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVDaXR5Q2xpY2sgKGNpdHkpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjaGFuZ2VDaXR5JywgY2l0eSkKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy8nKQogICAgICB0aGlzLmtleXdvcmQgPSAnJwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGhhc05vRGF0YSAoKSB7CiAgICAgIHJldHVybiAhdGhpcy5saXN0Lmxlbmd0aAogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGtleXdvcmQgKCkgewogICAgICBpZiAodGhpcy50aW1tZXIpIHsKICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1tZXIpCiAgICAgIH0KICAgICAgdGhpcy50aW1tZXIgPSBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICBjb25zdCByZXN1bHQgPSBbXQogICAgICAgIGlmICghdGhpcy5rZXl3b3JkKSB7CiAgICAgICAgICB0aGlzLmxpc3QgPSBbXQogICAgICAgICAgcmV0dXJuCiAgICAgICAgfQogICAgICAgIGZvciAobGV0IGkgaW4gdGhpcy5jaXRpZXMpIHsKICAgICAgICAgIHRoaXMuY2l0aWVzW2ldLmZvckVhY2goKHZhbHVlKSA9PiB7CiAgICAgICAgICAgIGlmICh2YWx1ZS5zcGVsbC5pbmRleE9mKHRoaXMua2V5d29yZCkgPiAtMSB8fAogICAgICAgICAgICB2YWx1ZS5uYW1lLmluZGV4T2YodGhpcy5rZXl3b3JkKSA+IC0xKSB7CiAgICAgICAgICAgICAgcmVzdWx0LnB1c2godmFsdWUpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pCiAgICAgICAgfQogICAgICAgIHRoaXMubGlzdCA9IHJlc3VsdAogICAgICB9LCAxMDApCiAgICB9CiAgfSwKICBtb3VudGVkICgpIHsKICAgIHRoaXMuc2Nyb2xsID0gbmV3IEJTY3JvbGwodGhpcy4kcmVmcy5zZWFyY2gsIHtjbGljazogdHJ1ZX0pCiAgfQp9Cg=="},{"version":3,"sources":["Search.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAiBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Search.vue","sourceRoot":"src/pages/city/components","sourcesContent":["<template>\n  <div>\n    <div class=\"wrapper\">\n      <input class=\"input\" placeholder=\"输入城市名或拼音\" v-model=\"keyword\"/>\n    </div>\n    <div class=\"search-content\" ref=\"search\" v-show=\"keyword\">\n        <ul>\n          <li class=\"list border-bottom\" v-for=\"item of list\" :key=\"item.id\"\n          @click=\"handleCityClick(item.name)\"\n          >{{item.name}}</li>\n          <li class=\"list border-bottom\" v-show=\"hasNoData\">没有找到匹配数据</li>\n        </ul>\n    </div>\n  </div>\n</template>\n\n<script>\nimport BScroll from 'better-scroll'\nexport default {\n  name: 'CitySearch',\n  props: {\n    cities: Object\n  },\n  data () {\n    return {\n      keyword: '',\n      list: [],\n      timmer: null\n    }\n  },\n  methods: {\n    handleCityClick (city) {\n      this.$store.commit('changeCity', city)\n      this.$router.push('/')\n      this.keyword = ''\n    }\n  },\n  computed: {\n    hasNoData () {\n      return !this.list.length\n    }\n  },\n  watch: {\n    keyword () {\n      if (this.timmer) {\n        clearTimeout(this.timmer)\n      }\n      this.timmer = setTimeout(() => {\n        const result = []\n        if (!this.keyword) {\n          this.list = []\n          return\n        }\n        for (let i in this.cities) {\n          this.cities[i].forEach((value) => {\n            if (value.spell.indexOf(this.keyword) > -1 ||\n            value.name.indexOf(this.keyword) > -1) {\n              result.push(value)\n            }\n          })\n        }\n        this.list = result\n      }, 100)\n    }\n  },\n  mounted () {\n    this.scroll = new BScroll(this.$refs.search, {click: true})\n  }\n}\n</script>\n\n<style scoped>\n.wrapper {\n  height: 0.58rem;\n  background: #00bcd4;\n  line-height: 0.58rem;\n  text-align: center;\n}\n.input {\n  width: 95%;\n  border-radius: 0.05rem;\n  text-align: center;\n  font-size: 0.26rem;\n  color: #ccc;\n  box-sizing: border-box;\n  padding: 0 0.1rem;\n}\n.search-content{\n  z-index: 1;\n  position: absolute;\n  top: 1.26rem;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background: #ccc;\n}\n.list{\n  background: #fff;\n  color: #666;\n  line-height: .48rem;\n  padding-left: .2rem;\n}\n</style>\n"]}]}